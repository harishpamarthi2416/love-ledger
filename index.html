<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Love Ledger Dashboard</title>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<style>
  body {
    margin:0;
    font-family:'Poppins',sans-serif;
    scroll-behavior:smooth;
    overflow:hidden;
  }
  section {
    min-height:100vh;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
  }
  .intro {
    background: radial-gradient(circle at top, #6b63ff 0%, #0d1129 80%);
    color:white;
    text-align:center;
    padding:40px;
    transition:opacity 1s;
  }
  .intro h1 {font-size:3em;margin-bottom:0.2em;}
  .intro p {font-size:1.3em;color:#dcd6ff;}
  .intro button {
    margin-top:2em;
    padding:15px 25px;
    border:none;
    border-radius:8px;
    background:#c7a9ff;
    color:#0d1129;
    font-weight:bold;
    font-size:1em;
    cursor:pointer;
    transition:0.3s;
    box-shadow:0 0 10px #c7a9ff;
  }
  .intro button:hover {background:#fff;color:#6b63ff;}
  .dashboard {
    background:#faf7ff;
    color:#333;
    padding:40px;
    display:none;
    opacity:0;
    transition:opacity 1s;
    flex-direction:column;
    align-items:center;
  }
  .chart {margin:40px 0;width:90%;max-width:1000px;}
  .blush-btn {
    background:#b07cff;
    color:white;
    border:none;
    padding:15px 25px;
    border-radius:8px;
    font-size:1em;
    cursor:pointer;
    transition:0.3s;
  }
  .blush-btn:hover {background:#a45cf5;}
  video {
    margin-top:20px;
    width:320px;
    border-radius:12px;
    display:none;
  }
</style>
</head>
<body>

<!-- PAGE 1 -->
<section class="intro" id="intro">
  <h1>Happy Birthday Pranavi ðŸ’™</h1>
  <p>It's your silver jubilee, PJ â€” 4/25 years of us</p>
  <button onclick="showDashboard()">View Our Story Metrics â†’</button>
</section>

<!-- PAGE 2 -->
<section class="dashboard" id="dashboard">
  <h2 style="color:#6b63ff;">Relationship Performance Dashboard</h2>
  <div id="summary" class="chart"></div>
  <div id="moodChart" class="chart"></div>
  <div id="trustChart" class="chart"></div>
  <div id="ltvChart" class="chart"></div>
  <div id="eventChart" class="chart"></div>
  <button class="blush-btn" onclick="revealVideo()">Click Here to Get Blush ðŸ’«</button>
  <video id="loveVideo" controls>
    <source src="Funniest 5 Second Video Ever!.mp4" type="video/mp4" />
  </video>
</section>

<script>
// Transition from greeting to dashboard
function showDashboard() {
  const intro = document.getElementById('intro');
  const dash = document.getElementById('dashboard');
  document.body.style.overflow = "hidden";
  intro.style.opacity = '0';
  setTimeout(() => {
    intro.style.display = 'none';
    dash.style.display = 'flex';
    setTimeout(()=>{ dash.style.opacity = '1'; document.body.style.overflow = "auto"; },50);
  }, 1000);
}

// Show video when button clicked
function revealVideo() {
  const vid=document.getElementById('loveVideo');
  vid.style.display='block';
  vid.scrollIntoView({behavior:'smooth'});
}

// Sample data
const data = [
  {"Date":"2020-01-10","EventType":"Movie Night","MoodScore":8,"TrustScore":95,"CumulativeAffection":20},
  {"Date":"2020-02-14","EventType":"Valentine","MoodScore":10,"TrustScore":98,"CumulativeAffection":40},
  {"Date":"2020-06-21","EventType":"Trip","MoodScore":9,"TrustScore":97,"CumulativeAffection":65},
  {"Date":"2021-01-01","EventType":"New Year","MoodScore":7,"TrustScore":93,"CumulativeAffection":80},
  {"Date":"2021-07-04","EventType":"Dinner","MoodScore":6,"TrustScore":85,"CumulativeAffection":95},
  {"Date":"2022-02-14","EventType":"Anniversary","MoodScore":9,"TrustScore":92,"CumulativeAffection":115},
  {"Date":"2023-03-10","EventType":"Gift","MoodScore":8,"TrustScore":90,"CumulativeAffection":130},
  {"Date":"2023-12-20","EventType":"Fight","MoodScore":3,"TrustScore":60,"CumulativeAffection":120},
  {"Date":"2024-01-15","EventType":"Apology","MoodScore":6,"TrustScore":70,"CumulativeAffection":130}
];

// Render dashboard
const dates=data.map(d=>d.Date);
const mood=data.map(d=>d.MoodScore);
const trust=data.map(d=>d.TrustScore);
const affection=data.map(d=>d.CumulativeAffection);
const eventTypes=[...new Set(data.map(d=>d.EventType))];
const avgMood=(mood.reduce((a,b)=>a+b,0)/mood.length).toFixed(1);
const avgTrust=(trust.reduce((a,b)=>a+b,0)/trust.length).toFixed(1);
const finalAffection=affection[affection.length-1];

document.getElementById('summary').innerHTML=
  `<h3>Key Metrics</h3>
   <p><b>Avg Mood:</b> ${avgMood} |
   <b>Avg Trust:</b> ${avgTrust}% |
   <b>Total Affection Units:</b> ${finalAffection}</p>`;

Plotly.newPlot('moodChart',[{
  x:dates,y:mood,type:'bar',
  marker:{color:mood.map(m=>m>=7?'#9be7ff':'#f78da7')}
}],{title:'Mood Over Time',xaxis:{title:'Date'},yaxis:{title:'Mood Score'}});

Plotly.newPlot('trustChart',[{
  x:dates,y:trust,type:'scatter',mode:'lines+markers',
  line:{color:'#c792ff',width:3}
}],{title:'Trust Score Over Time',xaxis:{title:'Date'},yaxis:{title:'Trust (%)'}});

Plotly.newPlot('ltvChart',[{
  x:dates,y:affection,type:'scatter',mode:'lines+markers',
  line:{color:'#b07cff',width:4,shape:'spline'}
}],{title:'Relationship LTV (Love Time Value)',xaxis:{title:'Date'},yaxis:{title:'Cumulative Affection'}});

const moodByEvent=eventTypes.map(t=>{
  const s=data.filter(d=>d.EventType===t);
  return (s.reduce((a,b)=>a+b.MoodScore,0)/s.length).toFixed(1);
});
Plotly.newPlot('eventChart',[{
  x:eventTypes,y:moodByEvent,type:'bar',marker:{color:'#e0baff'}
}],{title:'Average Mood by Event Type',xaxis:{title:'Event Type'},yaxis:{title:'Avg Mood'}});
</script>
</body>
</html>
